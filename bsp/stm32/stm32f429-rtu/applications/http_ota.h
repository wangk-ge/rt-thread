/****************************************************************************
 *
 * File Name
 *  http_ota.h
 * Author
 *  
 * Date
 *  2020/04/29
 * Descriptions:
 * HTTP OTA固件下载和升级接口定义
 *
 ****************************************************************************/

#ifndef __HTTP_OTA_H__
#define __HTTP_OTA_H__

#include <stdint.h>
#include <stdbool.h>

/**---------------------------------------------------------------------------*
**                             Compiler Flag                                  *
**----------------------------------------------------------------------------*/
#ifdef __cplusplus
extern   "C"
{
#endif

/*----------------------------------------------------------------------------*
**                             Mcaro Definitions                              *
**----------------------------------------------------------------------------*/

/*----------------------------------------------------------------------------*
**                             Data Structures                                *
**----------------------------------------------------------------------------*/
enum
{
	HTTP_OTA_DOWNLOAD_AND_VERIFY_SUCCESS = 0, // 下载并校验成功
	HTTP_OTA_DOWNLOAD_FAIL, // 下载失败
	HTTP_OTA_VERIFY_FAIL // 校验失败
} http_ota_result;

/*----------------------------------------------------------------------------*
**                             Function Define                                *
**----------------------------------------------------------------------------*/
/* 下载固件并执行MD5校验,返回值: 0=下载并校验成功, -1=下载失败, -2=校验失败 */
http_ota_result http_ota_fw_download(const char *uri, int firmware_size, uint8_t *orign_md5);

/**--------------------------------------------------------------------------*
**                         Compiler Flag                                     *
**---------------------------------------------------------------------------*/
#ifdef   __cplusplus
}
#endif

#endif // __HTTP_OTA_H__
